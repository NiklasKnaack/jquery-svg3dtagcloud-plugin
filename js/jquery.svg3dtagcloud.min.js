window.SVG3DTagCloud=function(n,t){var m={entries:[],width:480,height:480,radius:"70%",radiusMin:75,bgDraw:!0,bgColor:"#000",opacityOver:1,opacityOut:.05,opacitySpeed:6,fov:800,speed:2,fontFamily:"Arial, sans-serif",fontSize:"15",fontColor:"#fff",fontWeight:"normal",fontStyle:"normal",fontStretch:"normal",fontToUpperCase:!1,tooltipFontFamily:"Arial, sans-serif",tooltipFontSize:"15",tooltipFontColor:"#fff",tooltipFontWeight:"normal",tooltipFontStyle:"normal",tooltipFontStretch:"normal",tooltipFontToUpperCase:!1,tooltipTextAnchor:"left",tooltipDiffX:0,tooltipDiffY:10};if(void 0!==t)for(var e in t)t.hasOwnProperty(e)&&m.hasOwnProperty(e)&&(m[e]=t[e]);if(!m.entries.length)return!1;var v,d,p,f,y,r,g=[],h=!0,b={x:0,y:0},u={x:0,y:0,z:0},x={x:0,y:0},A={sx:0,cx:0,sy:0,cy:0},w=Math.PI/180,C="http://www.w3.org/2000/svg";function o(){var t=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,e=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,o=t,i=e;i=0<m.width.toString().indexOf("%")||0<m.height.toString().indexOf("%")?(o=Math.round(n.offsetWidth/100*parseInt(m.width)),Math.round(o/100*parseInt(m.height))):(o=parseInt(m.width),parseInt(m.height)),t<=o&&(o=t),e<=i&&(i=e),f={x:o/2,y:i/2},x.x=m.speed/f.x,x.y=m.speed/f.y,(p=i<=o?i/100*parseInt(m.radius):o/100*parseInt(m.radius))<1&&(p=1),(d=p/2)<m.radiusMin&&(d=m.radiusMin,p=2*d),y.setAttribute("width",o),y.setAttribute("height",i),m.bgDraw&&(r.setAttribute("width",o),r.setAttribute("height",i)),function(t){for(var e=0,o=g.length;e<o;e++)i=g[e],n=t,void 0,r=i.vectorPosition.x-u.x,s=i.vectorPosition.y-u.y,l=i.vectorPosition.z-u.z,a=Math.sqrt(r*r+s*s+l*l),i.vectorPosition.x/=a,i.vectorPosition.y/=a,i.vectorPosition.z/=a,i.vectorPosition.x*=n,i.vectorPosition.y*=n,i.vectorPosition.z*=n;var i,n,r,s,l,a}(d)}function i(t){for(var e=0,o=g.length;e<o;e++){var i=g[e];if(i.element.getAttribute("x")===t.getAttribute("x")&&i.element.getAttribute("y")===t.getAttribute("y"))return i}}function s(){requestAnimFrame(s),function(){var t=x.x*b.x-m.speed,e=m.speed-x.y*b.y,o=t*w,i=e*w;A.sx=Math.sin(o),A.cx=Math.cos(o),A.sy=Math.sin(i),A.cy=Math.cos(i);for(var n=0,r=g.length;n<r;n++){var s=g[n];if(h){var l=s.vectorPosition.x,a=s.vectorPosition.y*A.sy+s.vectorPosition.z*A.cy;s.vectorPosition.x=l*A.cx+a*A.sx,s.vectorPosition.y=s.vectorPosition.y*A.cy+s.vectorPosition.z*-A.sy,s.vectorPosition.z=l*-A.sx+a*A.cx}var u,c=m.fov/(m.fov+s.vectorPosition.z);s.vector2D.x=s.vectorPosition.x*c+f.x,s.vector2D.y=s.vectorPosition.y*c+f.y,s.diffX&&s.diffY&&(s.vector2D.x-=s.diffX,s.vector2D.y-=s.diffY),s.element.setAttribute("x",s.vector2D.x),s.element.setAttribute("y",s.vector2D.y),h?(u=(d-s.vectorPosition.z)/p)<m.opacityOut&&(u=m.opacityOut):(u=parseFloat(s.element.getAttribute("opacity")),s.mouseOver?u+=(m.opacityOver-u)/m.opacitySpeed:u+=(m.opacityOut-u)/m.opacitySpeed),s.element.setAttribute("opacity",u)}g=g.sort(function(t,e){return e.vectorPosition.z-t.vectorPosition.z})}()}function S(t){h=!1;var e=i(t.target);!function(t){for(var e=0,o=g.length;e<o;e++){var i=g[e];i.index===t.index?i.mouseOver=!0:i.mouseOver=!1}}(e),e.tooltip&&function(t){t.tooltip&&(v.setAttribute("x",t.vector2D.x-m.tooltipDiffX),v.setAttribute("y",t.vector2D.y-m.tooltipDiffY),v.textContent=m.tooltipFontToUpperCase?t.tooltipLabel.toUpperCase():t.tooltipLabel,v.setAttribute("opacity",1))}(e)}function P(t){h=!0,i(t.target).tooltip&&v.setAttribute("opacity",0)}function l(t){b=function(t,e){var o=t.getBoundingClientRect();return{x:e.clientX-o.left,y:e.clientY-o.top}}(y,t)}function a(t){o()}window.requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},(y=document.createElementNS(C,"svg")).addEventListener("mousemove",l),n.appendChild(y),m.bgDraw&&((r=document.createElementNS(C,"rect")).setAttribute("x",0),r.setAttribute("y",0),r.setAttribute("fill",m.bgColor),y.appendChild(r)),function(){for(var t=!1,e=1,o=m.entries.length+1;e<o;e++){var i=Math.acos(2*e/o-1),n=Math.sqrt(o*Math.PI)*i,r=Math.cos(n)*Math.sin(i),s=Math.sin(n)*Math.sin(i),l=Math.cos(i),a=(u=e-1,c=m.entries[e-1],d=r,p=s,f=l,h=void 0,h={},void 0!==c.label?(h.element=document.createElementNS(C,"text"),h.element.setAttribute("x",0),h.element.setAttribute("y",0),h.element.setAttribute("fill",m.fontColor),h.element.setAttribute("font-family",m.fontFamily),h.element.setAttribute("font-size",m.fontSize),h.element.setAttribute("font-weight",m.fontWeight),h.element.setAttribute("font-style",m.fontStyle),h.element.setAttribute("font-stretch",m.fontStretch),h.element.setAttribute("text-anchor","middle"),h.element.textContent=m.fontToUpperCase?c.label.toUpperCase():c.label):void 0!==c.image&&(h.element=document.createElementNS(C,"image"),h.element.setAttribute("x",0),h.element.setAttribute("y",0),h.element.setAttribute("width",c.width),h.element.setAttribute("height",c.height),h.element.setAttribute("id","image_"+u),h.element.setAttributeNS("http://www.w3.org/1999/xlink","href",c.image),h.diffX=c.width/2,h.diffY=c.height/2),h.link=document.createElementNS(C,"a"),h.link.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c.url),h.link.setAttribute("target",c.target),h.link.setAttribute("rel",c.rel),h.link.addEventListener("mouseover",S,!0),h.link.addEventListener("mouseout",P,!0),h.link.appendChild(h.element),void 0!==c.tooltip?(h.tooltip=!0,h.tooltipLabel=m.tooltipFontToUpperCase?c.tooltip.toUpperCase():c.tooltip):h.tooltip=!1,h.index=u,h.mouseOver=!1,h.vectorPosition={x:d,y:p,z:f},h.vector2D={x:0,y:0},y.appendChild(h.link),h);g.push(a),void 0!==m.entries[e-1].tooltip&&(t=!0)}var u,c,d,p,f,h;t&&((v=document.createElementNS(C,"text")).setAttribute("x",0),v.setAttribute("y",0),v.setAttribute("fill",m.tooltipFontColor),v.setAttribute("font-family",m.tooltipFontFamily),v.setAttribute("font-size",m.tooltipFontSize),v.setAttribute("font-weight",m.tooltipFontWeight),v.setAttribute("font-style",m.tooltipFontStyle),v.setAttribute("font-stretch",m.tooltipFontStretch),v.setAttribute("text-anchor",m.tooltipTextAnchor),v.textContent="",y.appendChild(v))}(),o(),s(),window.addEventListener("resize",a)},"undefined"!=typeof jQuery&&function(i){i.fn.svg3DTagCloud=function(e){var o=arguments;return this.each(function(){if(i.data(this,"plugin_SVG3DTagCloud")){var t=i.data(this,"plugin_SVG3DTagCloud");t[e]?t[e].apply(this,Array.prototype.slice.call(o,1)):i.error("Method "+e+" does not exist on jQuery.svg3DTagCloud")}else i.data(this,"plugin_SVG3DTagCloud",new SVG3DTagCloud(this,e))})}}(jQuery);